{%- if settings.predictive_search_enabled -%}
<script src="{{ 'predictive-search.js' | asset_url }}" defer="defer"></script>
<script>
  $('body').on('click', function() {
    $('#predictive-search').attr('style',$('#predictive-search').attr('style')==='display: block;'?'display: none':'display: none;'); 
    $('#Search').click(function(){return false;});
    $('.predictive-search__list-item a').click(function(){return false;});
  });
</script>
{%- endif -%}


<!-- Header Section Start -->
<div class="header-section section" {% if section.settings.header_sticky_enable == true %} id="sticky-header"{% endif %}>
  <div class="container">
    <div class="row">

      <!-- Header Logo -->
      <div class="col">
        <div class="header-logo">
          {%- include 'header-logo' -%}
        </div>
      </div>

      <!-- Main Menu -->
      <div class="col d-none d-lg-block">
        {%- include 'main-menu' -%}
      </div>

      <!-- Header Action -->
      <div class="col">
        <div class="header-action">
          
          
          {%- if settings.currency_enable -%} 
          {%- if section.settings.currency_handle == 'shopify_currency' -%}
          {%- if localization.available_countries.size > 1 -%}
          <localization-form>
            {% form 'localization' %}
            <div class="switcher-currency-trigger disclosure">
              <button type="button" class="disclosure__button dropdown-toggle" aria-expanded="false" aria-controls="CountryList">
                <span class="">
                {{ localization.country.currency.iso_code }} {{ localization.country.currency.symbol }}
                </span>
              </button>

                <ul id="CountryList" role="list" class="disclosure__list switcher-dropdown" hidden>
                  {% for country in localization.available_countries %}
                  <li class="disclosure__item" tabindex="-1">
                    <a href="#"{% if country.iso_code == localization.country.iso_code %} aria-current="true"{% endif %} data-value="{{ country.iso_code }}">
                      {{ country.name }} ({{ country.currency.iso_code }} {{ country.currency.symbol }})
                    </a>
                  </li>
                  {% endfor %}
                </ul>

                <input type="hidden" name="country_code" value="{{ localization.country.iso_code }}">
                </div>
              {% endform %}
              </localization-form>
          {%- endif -%}
          {%- elsif section.settings.currency_handle == 'ajax_currency' -%}
          {%- render 'currency-picker' -%}
          {%- endif -%}
          {%- endif -%}   
          
          <!-- Wishlist -->
          {%- if section.settings.wishlist_icon_enable and settings.wishlist_enable -%}
          <a href="/pages/wishlist" class="header-wishlist"><span class=""><i class="fa fa-heart-o"></i></span></a>
          {%- endif -%}
          
          
          {% if section.settings.header_user_menu_enable == true %}
          <div class="user-menu-active">
            <span class="dropdown-toggle">
              <span class=""><i class="fa fa-user-o" aria-hidden="true"></i></span>
            </span>
            {% assign currency = settings.supported_currencies | split: '|' %}
            <ul class="user-dropdown">
              {% if customer %}
              <li><a href="/account/logout" class="header-wishlist">Logout</a></li>
              {% else %}
              <li><a href="/account/login" class="header-wishlist">Login</a></li>
              {% endif %}
              {%- assign user_menu = section.settings.user_menu_handle -%}
              {% for link in linklists[user_menu].links %}
              <li><a href="{{ link.url }}">{{ link.title }}</a></li>
              {% endfor %}
            </ul>
          </div>
          {% endif %}
          
          <!-- Search -->
          {% if section.settings.header_search_enable == true %}
          <div class="header-search">
            <button class="search-open search-toggle">
              <i class="search-icon bardy bardy-search"></i>
              <i class="close-icon bardy bardy-cancel"></i>
            </button>
            <div class="header-search-form">

              <predictive-search id="predictive-search-toggle" search-open="false">
                <form action="{{ routes.search_url }}" method="get" role="search" class="">
                  <input
                         id="Search"
                         type="search"
                         name="q"
                         value="{{ search.terms | escape }}"
                         {%- if settings.predictive_search_enabled -%}
                         role="combobox"
                         aria-expanded="false"
                         aria-owns="predictive-search-results-list"
                         aria-controls="predictive-search-results-list"
                         aria-haspopup="listbox"
                         aria-autocomplete="list"
                         autocorrect="off"
                         autocomplete="off"
                         autocapitalize="off"
                         spellcheck="false"
                         {%- endif -%}
                         class="header-search-field"
                         placeholder="{{ 'general.search.placeholder' | t }}"
                         >
                  <button type="submit"><i class="bardy bardy-search"></i></button>
                  <input name="options[prefix]" type="hidden" value="last">

                  {%- if settings.predictive_search_enabled -%}
                  <div id="predictive-search" tabindex="-1"></div>
                  {%- endif -%}
                </form>
              </predictive-search>
              
              
            </div> 
          </div> 
          {% endif %}
          
          <!-- Cart Wrap Start-->
          {% if section.settings.header_mini_cart_enable == true %}
          <div class="header-cart-wrap">
            {% include 'mini-cart' %}
          </div>
          {% endif %}
          <!-- Cart Wrap End-->

        </div>
      </div>

      <div class="col-12 d-block d-lg-none">
        <div class="mobile-menu"></div>
      </div>

    </div>
  </div>
</div><!-- Header Section End -->
  
  
  <script>
    class LocalizationForm extends HTMLElement {
      constructor() {
        super();
        this.elements = {
          input: this.querySelector('input[name="language_code"], input[name="country_code"]'),
          button: this.querySelector('button'),
          panel: this.querySelector('ul'),
        };
        this.elements.button.addEventListener('click', this.openSelector.bind(this));
        this.elements.button.addEventListener('focusout', this.closeSelector.bind(this));
        this.addEventListener('keyup', this.onContainerKeyUp.bind(this));

        this.querySelectorAll('a').forEach(item => item.addEventListener('click', this.onItemClick.bind(this)));
      }

      hidePanel() {
        this.elements.button.setAttribute('aria-expanded', 'false');
        this.elements.panel.setAttribute('hidden', true);
      }

      onContainerKeyUp(event) {
        if (event.code.toUpperCase() !== 'ESCAPE') return;

        this.hidePanel();
        this.elements.button.focus();
      }

      onItemClick(event) {
        event.preventDefault();
        const form = this.querySelector('form');
        this.elements.input.value = event.currentTarget.dataset.value;
        if (form) form.submit();
      }

      openSelector() {
        this.elements.button.focus();
        this.elements.panel.toggleAttribute('hidden');
        this.elements.button.setAttribute('aria-expanded', (this.elements.button.getAttribute('aria-expanded') === 'false').toString());
      }

      closeSelector(event) {
        const shouldClose = event.relatedTarget && event.relatedTarget.nodeName === 'BUTTON';
        if (event.relatedTarget === null || shouldClose) {
          this.hidePanel();
        }
      }
    }

    customElements.define('localization-form', LocalizationForm);

  </script>
  

{%- style -%}
  .theme-logo img{
    max-width: {{ section.settings.logo_width }}px !important;
  }
  .header-section {
    background-color: {{ section.settings.header_bg_color }};
  }
  .main-menu > ul > li > a {
    color: {{ section.settings.header_menu_color }};
  }  
  .main-menu > ul > li > a::before {
    background-color: {{ section.settings.header_menu_before_color }};
  }
  .sub-menu {
    background-color: {{ section.settings.header_submenu_bg_color }};
  }
  .sub-menu li a, .mega-menu li.col > a {
    color: {{ section.settings.header_submenu_color }};
  }

  .main-menu > ul > li:hover > a {
    color: {{ section.settings.header_menu_hover_color }};
  }  
  .main-menu > ul > li:hover > a::before {
    background-color: {{ section.settings.header_menu_hover_before_color }};
  }
  .sub-menu li:hover > a {
    color: {{ section.settings.header_submenu_hover_color }};
  }

  .header-wishlist,
  .header-section .dropdown-toggle::after,
  .header-section .currency-trigger, 
  .header-section .header-cart-toggle span, 
  .header-section .header-cart-toggle i, 
  .header-section .user-menu-active .dropdown-toggle i, 
  .header-section .header-search .search-toggle i  {
      color: {{ section.settings.header_currency_cart_color }};
      border-top-color: {{ section.settings.header_currency_cart_color }};
  }  
  .header-wishlist:hover,
  .header-section .dropdown-toggle:hover::after,
  .header-section .currency-trigger:hover, 
  .header-section .header-cart-toggle span:hover, 
  .header-section .header-cart-toggle i:hover, 
  .header-section .user-menu-active .dropdown-toggle i:hover, 
  .header-section .header-search .search-toggle i:hover  {
      color: {{ section.settings.header_currency_cart_hover_color }};
      border-top-color: {{ section.settings.header_currency_cart_hover_color }};
  }


  .mobile-menu .mean-bar .meanmenu-reveal span.menu-bar {
	  background-color: {{ section.settings.mobile_menu_icon_color }};
  }

  .mobile-menu .mean-bar .meanmenu-reveal span.menu-bar,
  .mobile-menu .mean-bar .meanmenu-reveal span.menu-bar::before, 
  .mobile-menu .mean-bar .meanmenu-reveal span.menu-bar::after,
  .mobile-menu .mean-bar .meanmenu-reveal span.menu-close::before, 
  .mobile-menu .mean-bar .meanmenu-reveal span.menu-close::after {
	  background-color: {{ section.settings.mobile_menu_icon_color }};
  }
  .mobile-menu .mean-bar .mean-nav {
      background-color: {{ section.settings.mobile_menu_bg_color }};
  }
  .mobile-menu .mean-bar .mean-nav > ul li a {
      color: {{ section.settings.mobile_menu_item_color }};
  }
  .mobile-menu .mean-bar .mean-nav > ul li a:hover {
      color: {{ section.settings.mobile_menu_item_hover_color }};
  }

{% if section.settings.mini_cart_color_enable %}
  .header-mini-cart {
      background-color: {{ section.settings.header_mini_cart_bg_color }};
  }
  .mini-cart-head h3 {
      color: {{ section.settings.header_mini_cart_title_color }};
  }
  .mini-cart-head,
  .mini-cart-body {
      border-color: {{ section.settings.header_mini_cart_border_color }};
  }
  .mini-cart-product .content .title {
      color: {{ section.settings.header_mini_cart_item_title_color }};
  }
  .mini-cart-product .content .title:hover {
      color: {{ section.settings.header_mini_cart_item_title_hover_color }};
  }
  .mini-cart-product .content span {
      color: {{ section.settings.header_mini_cart_item_price_color }};
  }
  .mini-cart-product .image .remove {
      background-color: {{ section.settings.header_mini_cart_item_delete_icon_bg_color }};
      color: {{ section.settings.header_mini_cart_item_delete_icon_color }};
  }
  .mini-cart-product .image .remove:hover {
      background-color: {{ section.settings.header_mini_cart_item_delete_hover_icon_bg_color }};
      color: {{ section.settings.header_mini_cart_item_delete_hover_icon_color }};
  }
  .mini-cart-footer h4 {
      color: {{ section.settings.header_mini_cart_item_subtotal_color }};
  }
  .mini-cart-footer .buttons a {
      background-color: {{ section.settings.header_mini_cart_button_bg_color }};
      color: {{ section.settings.header_mini_cart_button_color }};
  }
  .mini-cart-footer .buttons a:hover {
      background-color: {{ section.settings.header_mini_cart_button_hover_bg_color }};
      color: {{ section.settings.header_mini_cart_button_hover_color }};
  }
{% endif %}
  
  
{%- endstyle -%}

{% schema %}
  {
    "name": "Header",
    "settings": [
		{
          "type": "header",
          "content": "Sticky Header Enable"
        },
		{
          "type": "checkbox",
          "id": "header_sticky_enable",
          "label": "Sticky Header Enable",
		  "default": true
        },
		{
          "type": "image_picker",
          "id": "logo",
          "label": "Logo"
        },
		{
          "type": "range",
          "id": "logo_width",
          "label": "Custom logo width",
          "min": 100,
          "max": 300,
          "step": 5,
          "unit": "px",
          "default": 150
        },
		{
          "type": "checkbox",
          "id": "ratina_logo_enable",
          "label": "Retina Logo Enable",
		  "default": false
        },
            {
              "type": "header",
              "content": "Currency"
            },
            {
              "type": "select",
              "id": "currency_handle",
              "label": "Select Currency",
              "options": [
                {
                  "label": "Shopify Default Currency",
                  "value": "shopify_currency"
                },
                {
                  "label": "Ajax Currency",
                  "value": "ajax_currency"
                }
              ],
              "default": "shopify_currency",
			  "info": "To add a country/region, go to your [payment settings.](/admin/settings/payments)"
            },
		{
          "type": "header",
          "content": "Wishlist"
        },
		{
          "type": "checkbox",
          "id": "wishlist_icon_enable",
          "label": "Show wishlist icon",
		  "default": false
        },
		{
          "type": "header",
          "content": "User Menu"
        },
		{
          "type": "link_list",
          "id": "user_menu_handle",
          "label": "User Menu"
        },
		{
          "type": "checkbox",
          "id": "header_user_menu_enable",
          "label": "Show Header User Menu",
		  "default": true
        },
		{
          "type": "header",
          "content": "Header Search"
        },
		{
          "type": "checkbox",
          "id": "header_search_enable",
          "label": "Show Header Search",
		  "default": false
        },
		{
          "type": "header",
          "content": "Header Mini Cart"
        },
		{
          "type": "checkbox",
          "id": "header_mini_cart_enable",
          "label": "Show Header Mini Cart",
		  "default": true
        },
		{
          "type": "header",
          "content": "Color"
        },
		{
          "type": "color",
          "id": "header_bg_color",
          "label": "Header Background Color",
		  "default": "#d0a97e"
        },
		{
          "type": "header",
          "content": "Header Menu"
        },
		{
          "type": "color",
          "id": "header_menu_color",
          "label": "Menu Color",
		  "default": "#222222"
        },
		{
          "type": "color",
          "id": "header_menu_before_color",
          "label": "Menu Before Color",
		  "default": "#222222"
        },
		{
          "type": "color",
          "id": "header_submenu_bg_color",
          "label": "Submenu Background Color",
		  "default": "#222222"
        },
		{
          "type": "color",
          "id": "header_submenu_color",
          "label": "Submenu Color",
		  "default": "#d8d8d8"
        },
		{
          "type": "color",
          "id": "header_menu_hover_color",
          "label": "Menu Item Hover Color"
        },
		{
          "type": "color",
          "id": "header_menu_hover_before_color",
          "label": "Menu Item Border Hover Color"
        },
		{
          "type": "color",
          "id": "header_submenu_hover_color",
          "label": "Submenu Item Hover Color"
        },
		{
          "type": "header",
          "content": "Header Option"
        },
		{
          "type": "color",
          "id": "header_currency_cart_color",
          "label": "Header Option Color",
		  "default": "#222222"
        },
		{
          "type": "color",
          "id": "header_currency_cart_hover_color",
          "label": "Header Option Hover Color"
        },
		{
          "type": "header",
          "content": "Mobile Menu"
        },
		{
          "type": "color",
          "id": "mobile_menu_icon_color",
          "label": "Mobile Menu Icon Color",
		  "default": "#222222"
        },
		{
          "type": "color",
          "id": "mobile_menu_bg_color",
          "label": "Mobile Menu Background Color",
		  "default": "#fff"
        },
		{
          "type": "color",
          "id": "mobile_menu_item_color",
          "label": "Mobile Menu Item Color",
		  "default": "#222222"
        },
		{
          "type": "color",
          "id": "mobile_menu_item_hover_color",
          "label": "Mobile Menu Item Hover Color",
		  "default": "#d0a97e"
        },
		{
          "type": "header",
          "content": "Mini Cart"
        },
		{
          "type": "text",
          "id": "mini_cart_title",
          "label": "Mini Cart Title",
		  "default": "Your cart"
        },
		{
          "type": "text",
          "id": "cart_item_title",
          "label": "Item Title",
		  "default": "Item"
        },
		{
          "type": "text",
          "id": "cart_items_title",
          "label": "Items Title",
		  "default": "Items"
        },

		{
          "type": "text",
          "id": "quantity_title",
          "label": "Quantity Title",
		  "default": "Qty: "
        },
		{
          "type": "text",
          "id": "view_cart_title",
          "label": "View Cart Title",
		  "default": "View Cart"
        },
		{
          "type": "text",
          "id": "checkout_title",
          "label": "Checkout Title",
		  "default": "Checkout"
        },

		{
          "type": "header",
          "content": "Mini Cart Style"
        },
		{
          "type": "checkbox",
          "id": "mini_cart_color_enable",
          "label": "Mini Cart Color Enable",
		  "default": false
        },
		{
          "type": "color",
          "id": "header_mini_cart_bg_color",
          "label": "Background Color"
        },
		{
          "type": "color",
          "id": "header_mini_cart_title_color",
          "label": "Title Color"
        },
		{
          "type": "color",
          "id": "header_mini_cart_border_color",
          "label": "Border Color"
        },
		{
          "type": "color",
          "id": "header_mini_cart_item_title_color",
          "label": "Product Item Title Color"
        },
		{
          "type": "color",
          "id": "header_mini_cart_item_title_hover_color",
          "label": "Product Item Title Hover Color"
        },
		{
          "type": "color",
          "id": "header_mini_cart_item_price_color",
          "label": "Product Item Price Color"
        },
		{
          "type": "color",
          "id": "header_mini_cart_item_delete_icon_bg_color",
          "label": "Delete Icon Background Color"
        },
		{
          "type": "color",
          "id": "header_mini_cart_item_delete_icon_color",
          "label": "Delete Icon Color"
        },
		{
          "type": "color",
          "id": "header_mini_cart_item_delete_hover_icon_bg_color",
          "label": "Delete Icon Hover Background Color"
        },
		{
          "type": "color",
          "id": "header_mini_cart_item_delete_hover_icon_color",
          "label": "Delete Icon Hover Color"
        },
		{
          "type": "color",
          "id": "header_mini_cart_item_subtotal_color",
          "label": "Subtoal Title Color"
        },
		{
          "type": "color",
          "id": "header_mini_cart_button_bg_color",
          "label": "Button Background Color"
        },
		{
          "type": "color",
          "id": "header_mini_cart_button_color",
          "label": "Button Color"
        },
		{
          "type": "color",
          "id": "header_mini_cart_button_hover_bg_color",
          "label": "Button Hover Background Color"
        },
		{
          "type": "color",
          "id": "header_mini_cart_button_hover_color",
          "label": "Button Hover Color"
        }
	]
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}